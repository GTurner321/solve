<!DOCTYPE html>
<html>
<head>
  <title>Equation Solver</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
    }
    .equation {
      font-size: 2em;
      background-color: lightblue;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    #inputBox {
      margin-left: 20px; 
    }
    #tryAgain {
      color: orange;
      display: none;
    }
    #successMessage {
      color: green;
      display: none;
    }
  </style>
</head>
<body>

  <div id="equationContainer"></div>
  <div id="inputBox">
    <input type="text" id="userInput" placeholder="Enter command (+n, -n, *n, /n, +nx, -nx, +x, -x)">
    <p id="tryAgain">try again</p>
  </div>
  <p id="successMessage"></p>

  <script>
    // Generate random numbers between -10 and 10
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // Format the equation string
    function formatEquation(a, b, c, d) {
      let equation = "";

      // Handle coefficients
      if (a === 1) {
        equation += "x";
      } else if (a === -1) {
        equation += "-x";
      } else if (a !== 0) {
        equation += a + "x";
      }

      if (b > 0) {
        equation += " + " + b.toFixed(3); 
      } else if (b < 0) {
        equation += " " + b.toFixed(3); 
      }

      equation += " = ";

      if (c === 1) {
        equation += "x";
      } else if (c === -1) {
        equation += "-x";
      } else if (c !== 0) {
        equation += c + "x";
      }

      if (d > 0) {
        equation += " + " + d.toFixed(3); 
      } else if (d < 0) {
        equation += " " + d.toFixed(3); 
      }

      // Handle cases where a, b, c, or d are 0
      if (a === 0 && b === 0) {
        equation = "0";
      }
      if (c === 0 && d === 0) {
        equation = "0";
      }

      return equation;
    }

    // Initialize variables
    let a, b, c, d;
    let equationString = "";

    // Generate the initial equation
    do {
      a = getRandomInt(-10, 10);
      c = getRandomInt(-10, 10);
    } while (a === c); 
    b = getRandomInt(-10, 10);
    d = getRandomInt(-10, 10);
    equationString = formatEquation(a, b, c, d);

    // Display the initial equation
    const equationContainer = document.getElementById("equationContainer");
    const equationElement = document.createElement("p");
    equationElement.classList.add("equation");
    equationElement.textContent = equationString;
    equationContainer.appendChild(equationElement);

    // Handle user input
    const userInput = document.getElementById("userInput");
    const tryAgainMessage = document.getElementById("tryAgain");
    const successMessage = document.getElementById("successMessage");

    userInput.addEventListener("keyup", function(event) {
      if (event.key === "Enter") {
        const command = userInput.value.trim();
        if (
          command === "+n" || 
          command === "-n" || 
          command === "*n" || 
          command === "/n" || 
          command === "+nx" || 
          command === "-nx" || 
          command === "+x" || 
          command === "-x" 
        ) {
          // Process command
          tryAgainMessage.style.display = "none"; 

          const num = parseFloat(command.substring(1)); // Extract number from command

          switch (command) {
            case "+n":
              b += num;
              d += num;
              break;
            case "-n":
              b -= num;
              d -= num;
              break;
            case "*n":
              a *= num;
              b *= num;
              c *= num;
              d *= num;
              break;
            case "/n":
              if (num !== 0) { 
                a /= num;
                b /= num;
                c /= num;
                d /= num;
              } else {
                tryAgainMessage.style.display = "block";
                return;
              }
              break;
            case "+nx":
              a += num;
              c += num;
              break;
            case "-nx":
              a -= num;
              c -= num;
              break;
            case "+x":
              a += 1;
              c += 1;
              break;
            case "-x":
              a -= 1;
              c -= 1;
              break;
          }

          // Update equation and display
          equationString = formatEquation(a, b, c, d);
          const newEquationElement = document.createElement("p");
          newEquationElement.classList.add("equation");
          newEquationElement.textContent = equationString;
          equationContainer.appendChild(newEquationElement);

          // Check for end condition
          if ((a === 1 && b === 0 && c === 0) || (a === 0 && c === 1 && d === 0)) {
            successMessage.textContent = "Well done! You have solved the equation.";
            successMessage.style.display = "block";
          } else {
            // Create new input box
            const newInputBox = document.createElement("input");
            newInputBox.type = "text";
            newInputBox.id = "userInput"; 
            newInputBox.placeholder = "Enter command (+n, -n, *n, /n, +nx, -nx, +x, -x)";
            newInputBox.addEventListener("keyup", this); 
            document.getElementById("inputBox").appendChild(newInputBox); 
          }

          // Clear previous input
          userInput.value = "";

        } else {
          tryAgainMessage.style.display = "block";
        }
      }
    });
  </script>

</body>
</html>
