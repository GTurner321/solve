<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Solver</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        .equation {
            font-size: 24px;
            font-weight: bold;
            color: black;
            margin: 20px 0;
        }
        .success {
            font-size: 24px;
            font-weight: bold;
            color: green;
        }
        .input-box {
            margin: 10px 0;
        }
        .try-again {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Equation Solver</h1>
    <div id="equations"></div>
    <script>
        function generateRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function formatEquation(a, b, c, d) {
            const term = (coefficient, variable) => {
                if (coefficient === 0) return '';
                if (coefficient === 1) return variable;
                if (coefficient === -1) return `-${variable}`;
                return `${coefficient}${variable}`;
            };

            const left = `${term(a, 'x')}${b !== 0 ? (b > 0 ? `+${b}` : b) : ''}`;
            const right = `${term(c, 'x')}${d !== 0 ? (d > 0 ? `+${d}` : d) : ''}`;

            return `${left || '0'}=${right || '0'}`;
        }

        let a, b, c, d;

        function initializeEquation() {
            do {
                a = generateRandomNumber(-10, 10);
                c = generateRandomNumber(-10, 10);
            } while (a === c);

            b = generateRandomNumber(-10, 10);
            d = generateRandomNumber(-10, 10);

            createEquationElement(formatEquation(a, b, c, d));
        }

        const equationsDiv = document.getElementById('equations');

        function createEquationElement(equation, liveInput = true, tryAgain = false) {
            const container = document.createElement('div');
            container.classList.add('equation-container');

            const equationEl = document.createElement('div');
            equationEl.classList.add('equation');
            equationEl.textContent = equation;
            container.appendChild(equationEl);

            if (liveInput) {
                const inputBox = document.createElement('input');
                inputBox.classList.add('input-box');
                inputBox.type = 'text';
                inputBox.placeholder = 'Enter a command';
                container.appendChild(inputBox);
                inputBox.focus();

                inputBox.addEventListener('keydown', function (event) {
                    if (event.key === 'Enter') {
                        handleCommand(inputBox.value, container);
                    }
                });
            }

            if (tryAgain) {
                const errorEl = document.createElement('div');
                errorEl.classList.add('try-again');
                errorEl.textContent = 'Try again';
                container.appendChild(errorEl);
            }

            equationsDiv.appendChild(container);
        }

        function handleCommand(command, container) {
            const validCommand = /^(\+|-|\*|\/)(\d+)|(\+|-)(x|\dx)$/;

            if (!validCommand.test(command)) {
                container.querySelector('.try-again')?.remove();
                createEquationElement(formatEquation(a, b, c, d), true, true);
                return;
            }

            const number = parseFloat(command.match(/\d+/)?.[0] || 1);

            if (command.startsWith('+')) {
                if (command.includes('x')) {
                    b += number;
                    d += number;
                } else {
                    b += number;
                    d += number;
                }
            } else if (command.startsWith('-')) {
                if (command.includes('x')) {
                    b -= number;
                    d -= number;
                } else {
                    b -= number;
                    d -= number;
                }
            }

            createEquationElement(formatEquation(a, b, c, d));
        }

        // Initialize the first equation
        initializeEquation();
    </script>
</body>
</html>
