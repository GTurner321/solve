<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Solver</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        .equation {
            font-size: 24px;
            font-weight: bold;
            color: black;
            margin: 20px 0;
        }
        .input-box {
            margin-left: 20px;
        }
        .try-again {
            color: red;
        }
        .success {
            font-size: 24px;
            font-weight: bold;
            color: green;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Equation Solver</h1>
    <div id="equation-container"></div>

    <script>
        function generateRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function formatEquation(a, b, c, d) {
            const term = (coeff, variable) => {
                if (coeff === 0) return '';
                if (coeff === 1) return variable;
                if (coeff === -1) return `-${variable}`;
                return `${coeff}${variable}`;
            };

            const left = `${term(a, 'x')}${b !== 0 ? (b > 0 ? `+${b}` : b) : ''}`;
            const right = `${term(c, 'x')}${d !== 0 ? (d > 0 ? `+${d}` : d) : ''}`;

            return `${left || '0'}=${right || '0'}`;
        }

        let a, b, c, d;

        function initializeEquation() {
            do {
                a = generateRandomNumber(-10, 10);
                c = generateRandomNumber(-10, 10);
            } while (a === c);

            b = generateRandomNumber(-10, 10);
            d = generateRandomNumber(-10, 10);

            renderEquation();
        }

        function renderEquation(message) {
            const container = document.getElementById('equation-container');
            container.innerHTML = '';

            const equation = formatEquation(a, b, c, d);
            const equationDiv = document.createElement('div');
            equationDiv.className = 'equation';
            equationDiv.textContent = equation;

            container.appendChild(equationDiv);

            if (message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'success';
                messageDiv.textContent = message;
                container.appendChild(messageDiv);
                return;
            }

            const input = document.createElement('input');
            input.className = 'input-box';
            input.placeholder = 'Enter command';

            input.addEventListener('keydown', function (event) {
                if (event.key === 'Enter') {
                    handleCommand(input.value);
                }
            });

            container.appendChild(input);
            input.focus();
        }

        function handleCommand(command) {
            const validCommand = /^(\+|-|\*|\/)(\d+)|(\+|-)(x|\dx)$/;

            if (!validCommand.test(command)) {
                alert('Invalid command. Try again!');
                return;
            }

            const number = parseFloat(command.match(/\d+/)?.[0] || 1);
            if (command.startsWith('+')) {
                if (command.includes('x')) {
                    a += number;
                    c += number;
                } else {
                    b += number;
                    d += number;
                }
            } else if (command.startsWith('-')) {
                if (command.includes('x')) {
                    a -= number;
                    c -= number;
                } else {
                    b -= number;
                    d -= number;
                }
            } else if (command.startsWith('*')) {
                a *= number;
                b *= number;
                c *= number;
                d *= number;
            } else if (command.startsWith('/')) {
                if (number !== 0) {
                    a /= number;
                    b /= number;
                    c /= number;
                    d /= number;
                } else {
                    alert('Division by zero is not allowed!');
                    return;
                }
            }

            checkCompletion();
        }

        function checkCompletion() {
            if (a === 1 && b === 0 && c === 0) {
                renderEquation('Well done! You have solved the equation. x=' + d);
            } else if (a === 0 && c === 1 && d === 0) {
                renderEquation('Well done! You have solved the equation. x=' + b);
            } else {
                renderEquation();
            }
        }

        initializeEquation();
    </script>
</body>
</html>
